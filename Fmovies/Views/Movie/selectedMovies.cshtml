
@using Fmovies.ViewModels
@using Fmovies.Models
@model Fmovies.ViewModels.MoviesViewModel
@{
    ViewBag.Title = "Selected Movies";
}

<h2 class="pt-2"><span class="fa fa-shopping-cart"></span> Your Cart</h2>
<div class="row">
    <div class="col-md-8">
        @foreach (var id in Model.selectedIds)
        {

            Movie m = new Movie();

            m = Model.movies.SingleOrDefault(x => x.movieId == id);
            Genre g = new Genre();
            g = Model.genres.SingleOrDefault(x => x.genreId == m.genreId);
            Model.totalPrice += m.moviePrice;
            <div class="card">
                <div class="card-body">
                    <div class="row p-2">
                        <div class="col-md-4">
                            <img src=@m.URL>
                        </div>
                        <div class="col-md-8 clearfix">
                            <p class="d-inline-block">@m.movieName</p>
                            
                            <p>Genre: @g.genreName<p>
                            <p>Price: &#8377;@m.moviePrice</p>
                        </div>
                    </div>

                </div>
            </div>

        }

        <div class="row pt-2">
            <div class="col-md-12 clearfix">
                @{
                    MoviesViewModel mm = new MoviesViewModel();
                    mm = Model;
                }
                <div class="float-right">
                    <h5 class="display-6" style="display:inline-block">Your total price: &#8377;@Model.totalPrice</h5>
                    @{
                        TempData["movieViewModel"] = Model;
                        @Html.ActionLink("Save to cart", "SaveToCart", "", new { @class = "btn btn-warning" })
                    }
                </div>
            </div>
        </div>
    </div>
</div>
@section Scripts{
<style>
    .mybtn:hover{
        background-color: #ff3f1c;
        border-color: #ff3f1c;
    }
</style>
}

